<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Áudios do QR Code</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 700px;
            margin: 20px auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 25px;
        }

        #audios-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .audio-card {
            background-color: #fff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 3px 12px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .audio-card p {
            margin: 0;
            font-weight: bold;
            color: #34495e;
        }

        audio {
            width: 100%;
            height: 40px; /* maior altura para touch em celular */
        }

        p.message {
            text-align: center;
            font-style: italic;
            color: #555;
        }

        /* Responsividade */
        @media (max-width: 480px) {
            .container {
                padding: 15px;
                margin: 10px;
            }

            .audio-card {
                padding: 15px;
            }

            h1 {
                font-size: 1.5em;
            }

            audio {
                height: 45px; /* um pouco maior em celular */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Áudios do QR Code</h1>
        <div id="audios-container"></div>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const qrId = urlParams.get('id');
        const container = document.getElementById('audios-container');

        if (!qrId) {
            container.innerHTML = '<p class="message">ID do QR code não informado.</p>';
        } else {
            fetch(`/api/audios/${qrId}`)
                .then(res => res.json())
                .then(data => {
                    if (!data.audios || data.audios.length === 0) {
                        container.innerHTML = '<p class="message">Nenhum áudio disponível.</p>';
                        return;
                    }

                    data.audios.forEach((audioUrl, index) => {
                        const div = document.createElement('div');
                        div.className = 'audio-card';
                        div.innerHTML = `
                            <p>Áudio ${index + 1}</p>
                            <audio controls>
                                <source src="${audioUrl}" type="audio/mpeg">
                                Seu navegador não suporta áudio.
                            </audio>
                        `;
                        container.appendChild(div);
                    });
                })
                .catch(err => {
                    container.innerHTML = '<p class="message">Erro ao carregar os áudios.</p>';
                    console.error(err);
                });
        }
    </script>
</body>
</html>
